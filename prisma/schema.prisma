generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Student {
  id            String              @id @default(uuid())
  class         String?
  fullName      String
  avatar        String?
  options       SingleEventOption[] @relation("StudentOptions")
  admin         Boolean             @default(false)
}

model SingleEventOption {
  id              String    @id @default(uuid())
  maxParticipants Int?      @default(2147483647)
  title           String
  description     String?
  eventId         String
  event           Event     @relation(fields: [eventId], references: [id], onDelete: Cascade)
  students        Student[] @relation("StudentOptions")
  metadata        Json?
}

model Event {
  id                      String              @id @default(uuid())
  type                    String
  title                   String
  description             String?
  startDate               DateTime?
  endDate                 DateTime?
  allowMultipleSelections Boolean             @default(false)
  signupEndDate           DateTime?           @map("signupEndDate")
  signupStartDate         DateTime?           @map("signupStartDate")
  options                 SingleEventOption[]
  visibleToClasses        String[]
  metadata                Json?
}

