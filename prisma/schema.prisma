generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Student {
  id            String          @id @default(uuid())
  class         String?
  fullName      String
  avatar        String?
  StudentOption StudentOption[]
}

model Teacher {
  id            String          @id @default(uuid())
  fullName      String
  TeacherOption TeacherOption[]
}

model Event {
  id                      String              @id @default(uuid())
  type                    String
  title                   String
  description             String?
  startDate               DateTime?
  endDate                 DateTime?
  allowMultipleSelections Boolean             @default(false)
  signupEndDate           DateTime?           @map("signupEndDate")
  signupStartDate         DateTime?           @map("signupStartDate")
  options                 SingleEventOption[]
  visibleToClasses        String[]
  metadata                Json?
}

model SingleEventOption {
  id              String          @id @default(uuid())
  maxParticipants Int?            @default(2147483647)
  title           String
  description     String?
  eventId         String
  event           Event           @relation(fields: [eventId], references: [id])
  metadata        Json?
  StudentOption   StudentOption[]
  TeacherOption   TeacherOption[]
}

model StudentOption {
  studentId String
  optionId  String
  option    SingleEventOption @relation(fields: [optionId], references: [id])
  student   Student           @relation(fields: [studentId], references: [id])

  @@id([studentId, optionId])
}

model TeacherOption {
  teacherId String
  optionId  String
  option    SingleEventOption @relation(fields: [optionId], references: [id])
  teacher   Teacher           @relation(fields: [teacherId], references: [id])

  @@id([teacherId, optionId])
}
