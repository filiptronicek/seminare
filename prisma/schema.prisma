generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Student {
  id                  String             @id @default(uuid())
  class               String
  fullName            String
  singleEventOptionId String?
  avatar              String?
  SingleEventOption   SingleEventOption? @relation(fields: [singleEventOptionId], references: [id])
  StudentEvent        StudentEvent[]
  events              Event[]            @relation("StudentEvents")
}

model Teacher {
  id            String              @id @default(uuid())
  fullName      String
  TeacherOption TeacherOption[]
  options       SingleEventOption[] @relation("SingleEventOptionToTeacher")
}

model Event {
  id                      String              @id @default(uuid())
  type                    String
  title                   String
  description             String?
  startDate               DateTime?
  endDate                 DateTime?
  allowMultipleSelections Boolean             @default(false)
  signupEndDate           DateTime?           @map("signupEndDate")
  signupStartDate         DateTime?           @map("signupStartDate")
  options                 SingleEventOption[]
  StudentEvent            StudentEvent[]
  students                Student[]           @relation("StudentEvents")
}

model SingleEventOption {
  id              String          @id @default(uuid())
  maxParticipants Int?            @default(2147483647)
  title           String
  description     String?
  eventId         String
  event           Event           @relation(fields: [eventId], references: [id])
  students        Student[]
  TeacherOption   TeacherOption[]
  teachers        Teacher[]       @relation("SingleEventOptionToTeacher")
}

model StudentEvent {
  studentId String
  eventId   String
  event     Event   @relation(fields: [eventId], references: [id])
  student   Student @relation(fields: [studentId], references: [id])

  @@id([studentId, eventId])
}

model TeacherOption {
  teacherId String
  optionId  String
  option    SingleEventOption @relation(fields: [optionId], references: [id])
  teacher   Teacher           @relation(fields: [teacherId], references: [id])

  @@id([teacherId, optionId])
}
